on:
  push:
    branches:
      - "holochain.github.io"
  pull_request_target:
    # Sequence of patterns matched against refs/heads
    branches:
      - "holochain.github.io"
  workflow_dispatch: {}

jobs:
  test_setup:
    name: Test Holonix Setup
    runs-on: ubuntu-latest
    steps:
      - name: Call setup script
        run: |
          set -xe
          bash <(curl https://raw.githubusercontent.com/holochain/holochain/${{ github.ref_name }}/setup.sh)
      - name: Test nix command
        run: |
          source /etc/profile.d/nix.sh
          nix run --version
